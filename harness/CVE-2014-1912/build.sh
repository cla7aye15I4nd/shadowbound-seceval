#!/bin/bash

if [ ! -d "Python-3.1.5" ]; then
	tar -xvf Python-3.1.5.tgz
fi

pushd Python-3.1.5


CC=$SHADOWBOUND/llvm-project/build/bin/clang \
CXX=$SHADOWBOUND/llvm-project/build/bin/clang++ \
CFLAGS="-fsanitize=overflow-defense -mllvm -odef-keep-going=1" \
CXXFLAGS="-fsanitize=overflow-defense -mllvm -odef-keep-going=1" \
LDFLAGS="-fsanitize=overflow-defense" \
./configure  --disable-ipv6

make -j`nproc`

popd

#./python poc1.py


