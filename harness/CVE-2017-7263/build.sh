#!/bin/bash

if [ ! -d "potrace-1.2" ]; then
	tar -xvf potrace-1.2.tar.gz
fi

pushd potrace-1.2

CC=$SHADOWBOUND/llvm-project/build/bin/clang \
CXX=$SHADOWBOUND/llvm-project/build/bin/clang++ \
CFLAGS="-fsanitize=overflow-defense" \
CXXFLAGS="-fsanitize=overflow-defense" \
./configure --disable-shared


make -j`nproc`


popd

# ./src/potrace 00210-potrace-heapoverflow-bm_readbody_bmp