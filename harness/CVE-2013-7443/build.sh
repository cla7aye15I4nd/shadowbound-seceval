#!/bin/bash

if [ ! -d "sqlite" ]; then
    git clone https://github.com/sqlite/sqlite.git -b version-3.8.2
fi

pushd sqlite

CC=$SHADOWBOUND/llvm-project/build/bin/clang \
CXX=$SHADOWBOUND/llvm-project/build/bin/clang++ \
CFLAGS="-fsanitize=overflow-defense" \
CXXFLAGS="-fsanitize=overflow-defense" \
./configure --disable-shared

make -j

popd