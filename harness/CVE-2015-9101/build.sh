#!/bin/bash

if [ ! -d "lame-398" ]; then
    tar -xvf lame-398.tar.gz
fi

pushd lame-398

CC=$SHADOWBOUND/llvm-project/build/bin/clang \
CXX=$SHADOWBOUND/llvm-project/build/bin/clang++ \
CFLAGS="-g -fsanitize=overflow-defense" \
CXXFLAGS="-g -fsanitize=overflow-defense" \
./configure

make -j$(nproc)

popd

# ./lame-398/frontend/lame -f -V 9 ./CVE-2015-9101_3.98 /dev/null